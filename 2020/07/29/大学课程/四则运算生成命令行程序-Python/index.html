<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>四则运算生成命令行程序 (Python) - Liang的个人博客</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="Liang Blog"><meta name="msapplication-TileImage" content="/img/avatar.jpg"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Liang Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="144x144" href="/img/avatar.jpg"><meta name="description" content="Github项目地址：Github Pages结对项目成员：张鹏 3118004985 郑靓 3118004988"><meta property="og:type" content="blog"><meta property="og:title" content="四则运算生成命令行程序 (Python)"><meta property="og:url" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/"><meta property="og:site_name" content="Liang的个人博客"><meta property="og:description" content="Github项目地址：Github Pages结对项目成员：张鹏 3118004985 郑靓 3118004988"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_1a34d9eb8e15a77a9e4c2d5ebc21686e.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_bbd168d7d9aeb25e7d9270afd96b830f.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_0bb403332af8e8c649391ee56389bfc4.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233819634.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234132290.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234112231.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233202708.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_60c4aa60be8f2619d5715fc68bfa762d.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_993b6c9a87996b978128c0eacd68a660.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_cc740cca241023e3a9f800dca4c03b00.png"><meta property="og:image" content="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_97d3624288947d04deacbe79ec23f00d.png"><meta property="article:published_time" content="2020-07-29T07:29:07.000Z"><meta property="article:modified_time" content="2021-12-24T16:03:49.926Z"><meta property="article:author" content="Liang"><meta property="article:tag" content="软件工程"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_1a34d9eb8e15a77a9e4c2d5ebc21686e.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/"},"headline":"四则运算生成命令行程序 (Python)","image":["https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_1a34d9eb8e15a77a9e4c2d5ebc21686e.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_bbd168d7d9aeb25e7d9270afd96b830f.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_0bb403332af8e8c649391ee56389bfc4.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233819634.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234132290.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234112231.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233202708.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_60c4aa60be8f2619d5715fc68bfa762d.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_993b6c9a87996b978128c0eacd68a660.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_cc740cca241023e3a9f800dca4c03b00.png","https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_97d3624288947d04deacbe79ec23f00d.png"],"datePublished":"2020-07-29T07:29:07.000Z","dateModified":"2021-12-24T16:03:49.926Z","author":{"@type":"Person","name":"Liang"},"publisher":{"@type":"Organization","name":"Liang的个人博客","logo":{"@type":"ImageObject","url":"https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/"}},"description":"Github项目地址：Github Pages结对项目成员：张鹏 3118004985 郑靓 3118004988"}</script><link rel="canonical" href="https://liang5757.github.io/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/"><link rel="icon" href="/img/avatar.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Liang的个人博客" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Liang的个人博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Liang5757"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>四则运算生成命令行程序 (Python)</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2020-07-29T07:29:07.000Z" title="2020-07-29T07:29:07.000Z">2020-07-29</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2021-12-24T16:03:49.926Z" title="2021-12-24T16:03:49.926Z">2021-12-25</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/">大学课程</a></span><span class="level-item">19 分钟读完 (大约2907个字)</span></div></div><div class="content"><h3 id="Github项目地址：Github-Pages"><a href="#Github项目地址：Github-Pages" class="headerlink" title="Github项目地址：Github Pages"></a>Github项目地址：<a target="_blank" rel="noopener" href="https://github.com/P4XL/Collaborators">Github Pages</a></h3><p><strong>结对项目成员</strong>：张鹏 3118004985 郑靓 3118004988</p>
<hr>
<a id="more"></a>
<h2 id="一、项目需求分析"><a href="#一、项目需求分析" class="headerlink" title="一、项目需求分析"></a>一、项目需求分析</h2><p><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_1a34d9eb8e15a77a9e4c2d5ebc21686e.png" alt></p>
<h2 id="二、功能实现"><a href="#二、功能实现" class="headerlink" title="二、功能实现"></a>二、功能实现</h2><p><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_bbd168d7d9aeb25e7d9270afd96b830f.png" alt></p>
<hr>
<h2 id="三、代码实现or功能说明"><a href="#三、代码实现or功能说明" class="headerlink" title="三、代码实现or功能说明"></a>三、代码实现or功能说明</h2><h3 id="★-GUI功能扩展说明-🎈"><a href="#★-GUI功能扩展说明-🎈" class="headerlink" title="★ GUI功能扩展说明 🎈"></a>★ GUI功能扩展说明 🎈</h3><p><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_0bb403332af8e8c649391ee56389bfc4.png" alt></p>
<ul>
<li><p>采用了<strong>多线程</strong>的界面，任何操作不会阻塞其他操作，<strong>例如：可以在生成答案的同时批改作业</strong></p>
</li>
<li><p>得益于上面的设计，可以<strong>同时生成多个表达式文件</strong>，存储形式如下所示</p>
<p>  <img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233819634.png" alt="image-20200414233819634"></p>
</li>
<li><p>对于<strong>错误的输入</strong>，会有提示，如下所示</p>
<p>  <img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234132290.png" alt="image-20200414234132290"></p>
</li>
<li><p>对于文件选择后，点击批改，对于<strong>文件的格式有错误检查</strong></p>
<p>  <img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414234112231.png" alt="image-20200414234112231"></p>
</li>
</ul>
<h3 id="通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成-详参下文-‘判断重复的思路’"><a href="#通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成-详参下文-‘判断重复的思路’" class="headerlink" title="通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成 (详参下文 ‘判断重复的思路’ )"></a>通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成 (详参下文 ‘判断重复的思路’ )</h3><h3 id="★-多线程（防止I-O阻塞）🎈"><a href="#★-多线程（防止I-O阻塞）🎈" class="headerlink" title="★ 多线程（防止I/O阻塞）🎈"></a>★ 多线程（防止I/O阻塞）🎈</h3><ul>
<li>创建<strong>生产者</strong>线程, 传参进队列 ‘queue’</li>
</ul>
<blockquote>
<p>producer = multiprocessing.Process(target=self.expression_generator, args=(queue,))</p>
</blockquote>
<ul>
<li>创建<strong>消费者</strong>进程, 传参进队列 ‘queue’</li>
</ul>
<blockquote>
<p>consumer = multiprocessing.Process(target=self.io_operation, args=(queue,))</p>
</blockquote>
<ul>
<li><p><strong>生产者</strong>——循环生成表达式 及其答案</p>
<ol>
<li><strong>构建</strong>随机表达式 以及生成其答案 ‘ Arithmetic(self.domain).create_arithmetic() ‘</li>
<li><strong>生成</strong>其表达式对应答案 ‘ Calculate(expression).cal_expression() ‘</li>
<li>将生成后缀表达式过程中每次的结果 以及操作符集合 保存到 字典 (‘ self.no_repeat_dict ‘ ) 中, 从而确保生成等式不相同 (即 3+2+1 与 1+2+3 不相等, ６×8  与 8×6 相等)</li>
<li>生成完成后, 把表达式 以及 答案添加到队列 <strong>queue</strong> 中</li>
</ol>
</li>
<li><p><strong>消费者</strong>——循环生成表达式 及其答案</p>
<ol>
<li>通过死循环不断获取队列内容, 若队列传出 ‘None’ 信号, 消费者进程停止</li>
<li>解析从队列获取的内容, 并将多次获取的表达式以及答案保存到 <strong>缓冲区(Buffer)</strong> 中, 有限次数后开始写入文件 并 销毁缓冲区内容</li>
</ol>
</li>
</ul>
<h3 id="★-判断重复的思路-🎈"><a href="#★-判断重复的思路-🎈" class="headerlink" title="★ 判断重复的思路 🎈"></a>★ 判断重复的思路 🎈</h3><ol>
<li>由于考虑到题目说<strong>1+2+3</strong>，<strong>2+1+3</strong>相等，<strong>1+2+3</strong>和<strong>3+2+1</strong>是不相等的，我一开始是从<strong>字符串的处理</strong>考虑，但是复杂度有点高。</li>
<li>所以换了一个角度考虑，从<strong>运算顺序</strong>入手，就想到用<strong>后缀表达式</strong>进行去重，并且这样也<strong>不用考虑括号</strong>，符合题目所说的<strong>（1+2)+3</strong>和<strong>1+2+3</strong>相等</li>
<li>具体就是<strong>存储每一次运算出来的结果</strong>，然后进行<strong>一一比较</strong><br> <strong>例如</strong>（这里举的是比较简单的例子）： 1+2+3，压入的数字：[3, 6]; 3+2+1，压入的数字：[5，6]，所有两个判断为不相等</li>
<li>但是这样会出现<strong>1+3</strong>和<strong>2+2</strong>判断为<strong>重复</strong>的情况，所以<strong>添加</strong>两个数组——<strong>[操作数]，[运算符]</strong>，作为比较的依据</li>
<li>再来考虑效率，用<strong>字典</strong>的数据结构，以答案为键，其他三个比较标志作为值，只在<strong>答案相等的情况下判重</strong><br> 附：最终选定了添加后缀计算的去重模式，就是为了避免 <strong>(1÷1)+3</strong> 和 <strong>1+(3÷1)</strong> 这种不为重复表达式的情况，但是效率确实比只判断（操作数、运算符）的模式低了</li>
</ol>
<h4 id="——创建数据结构"><a href="#——创建数据结构" class="headerlink" title="——创建数据结构"></a>——创建数据结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用答案作为索引构建的字典，</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;1&#x27;2/2&quot;</span>: [</span><br><span class="line">        [[压入的数字], [操作数], [运算符]],</span><br><span class="line">        [[压入的数字], [操作数], [运算符]],</span><br><span class="line">        ...</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过比较上述字典, 确认新表达式是否已经在上述字典中</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge_repeat</span>(<span class="params">self, answer, test_sign</span>):</span></span><br><span class="line">    <span class="keyword">for</span> expression_sign <span class="keyword">in</span> self.no_repeat_dict[answer]:</span><br><span class="line">        <span class="comment"># 记录相同的个数</span></span><br><span class="line">        same_num = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            <span class="keyword">if</span> collections.Counter(expression_sign[i]) == collections.Counter(test_sign[i]):</span><br><span class="line">                same_num += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">        <span class="comment"># 如果中间结果、操作数、运算符均相等，则为重复</span></span><br><span class="line">        <span class="keyword">if</span> same_num == <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h3 id="★-生成表达式思路-🎈"><a href="#★-生成表达式思路-🎈" class="headerlink" title="★ 生成表达式思路 🎈"></a>★ 生成表达式思路 🎈</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表达式列表形式</span></span><br><span class="line">[<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;÷&#x27;</span>, <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;8/9&#x27;</span>, <span class="string">&#x27;÷&#x27;</span>, <span class="string">&#x27;51&#x27;</span>, <span class="string">&#x27;)&#x27;</span>]</span><br></pre></td></tr></table></figure>
<ol>
<li>随机生成<strong>操作数</strong>列表，<strong>运算符</strong>列表</li>
<li>根据以上两个列表构建<strong>无括号表达式</strong></li>
<li>根据运算符个数，随机生成括号个数，<strong>最大</strong>个数为（ 1-&gt;0, 2-&gt;1, 3-&gt;2 ）</li>
<li>再随机括号位置，维护<strong>操作数位置列表</strong>，插入括号</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成表达式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_arithmetic</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="comment"># 生成随机操作数、运算符列表</span></span><br><span class="line">    self.create_operand_list()</span><br><span class="line">    self.create_operator_list()</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 构建表达式列表</span></span><br><span class="line">    self.expression_split.append(self.operand_list[i])</span><br><span class="line">    self.expression_split.append(self.operator_list[i])</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(self.operator_list):</span><br><span class="line">        self.expression_split.append(self.operand_list[i])</span><br><span class="line">        self.expression_split.append(self.operator_list[i])</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        self.expression_split.append(self.operand_list[i])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 插入括号</span></span><br><span class="line">        <span class="keyword">if</span> self.operator_num != <span class="number">1</span>:</span><br><span class="line">            bracket_num = random.randint(<span class="number">1</span>, self.operator_num - <span class="number">1</span>)</span><br><span class="line">            self.insert_bracket(bracket_num)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 删除无用括号</span></span><br><span class="line">            self.del_useless_bracket()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> [self.expression_split, self.operand_list, self.operator_list]</span><br></pre></td></tr></table></figure>
<h3 id="★-计算思路（后缀表达式）-🎈"><a href="#★-计算思路（后缀表达式）-🎈" class="headerlink" title="★ 计算思路（后缀表达式） 🎈"></a>★ 计算思路（后缀表达式） 🎈</h3><h4 id="生成后缀表达式"><a href="#生成后缀表达式" class="headerlink" title="生成后缀表达式"></a>生成后缀表达式</h4><ol>
<li>设置两个栈，一个用以存储运算符，一个用以存储后缀表达式</li>
<li>循环遍历表达式列表，如果是<strong>操作数</strong>，则加入<strong>后缀栈</strong></li>
<li>否则如果是运算符则进入以下判断<ul>
<li>如果运算符栈为<strong>空</strong>，或者栈顶为 <strong>(</strong> ，则压入<strong>运算符栈</strong></li>
<li>否则如果当前运算符<strong>大于</strong>栈顶运算符的优先级，则压入<strong>运算符栈</strong></li>
<li>否则<strong>弹栈并压入后缀栈</strong>直到优先级<strong>大于</strong>栈顶<strong>或空栈</strong></li>
</ul>
</li>
<li>否则如果遇到括号则进入以下判断<ul>
<li>若为 <strong>(</strong> 直接压入<strong>运算符栈</strong></li>
<li>否则<strong>弹栈并压入后缀栈</strong>直到遇到 <strong>(</strong></li>
</ul>
</li>
<li>将运算符栈<strong>剩余的元素</strong>压入<strong>后缀栈</strong></li>
</ol>
<h4 id="计算后缀表达式"><a href="#计算后缀表达式" class="headerlink" title="计算后缀表达式"></a>计算后缀表达式</h4><ol>
<li>用一个栈（calculate_stack）作为计算中介</li>
<li>循环遍历后缀表达式，若为<strong>数字</strong>压入 <strong>calculate_stack</strong></li>
<li>否则从 <strong>calculate_stack</strong> 弹出两个数字，分别化为分数类，进行计算，结果压入 <strong>calculate_stack</strong></li>
<li>重复 <strong>2-3</strong>，若<strong>期间</strong>运算结果<strong>出现负数</strong>，或<strong>除数为0</strong>，则返回false</li>
<li>直至后缀表达式遍历完成，返回 <strong>calculate_stack</strong> 的栈顶</li>
</ol>
<h3 id="代码-🎈"><a href="#代码-🎈" class="headerlink" title="代码 🎈"></a>代码 🎈</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculate</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, expression</span>):</span></span><br><span class="line">        self.expression = expression</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分数加法 a1/b1 + a2/b2 = (a1b2 + a2b1)/b1b2</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fraction_add</span>(<span class="params">fra1, fra2</span>):</span></span><br><span class="line">        molecular = fra1.molecular * fra2.denominator + fra2.molecular * fra1.denominator</span><br><span class="line">        denominator = fra1.denominator * fra2.denominator</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Fraction(molecular, denominator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分数减法 a1/b1 - a2/b2 = (a1b2 - a2b1)/b1b2</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fraction_minus</span>(<span class="params">fra1, fra2</span>):</span></span><br><span class="line">        molecular = fra1.molecular * fra2.denominator - fra2.molecular * fra1.denominator</span><br><span class="line">        denominator = fra1.denominator * fra2.denominator</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Fraction(molecular, denominator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分数乘法 a1/b1 * a2/b2 = a1a2/b1b2</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fraction_multiply</span>(<span class="params">fra1, fra2</span>):</span></span><br><span class="line">        molecular = fra1.molecular * fra2.molecular</span><br><span class="line">        denominator = fra1.denominator * fra2.denominator</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Fraction(molecular, denominator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分数除法 a1/b1 ÷ a2/b2 = a1b2/a2b1</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fraction_divide</span>(<span class="params">fra1, fra2</span>):</span></span><br><span class="line">        molecular = fra1.molecular * fra2.denominator</span><br><span class="line">        denominator = fra1.denominator * fra2.molecular</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Fraction(molecular, denominator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 基本运算选择器</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">operate</span>(<span class="params">self, num1, num2, operater</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(num1, Fraction):</span><br><span class="line">            num1 = Fraction(num1)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(num2, Fraction):</span><br><span class="line">            num2 = Fraction(num2)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 计算结果</span></span><br><span class="line">        <span class="keyword">if</span> operater == <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.fraction_add(num1, num2)</span><br><span class="line">        <span class="keyword">if</span> operater == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.fraction_minus(num1, num2)</span><br><span class="line">        <span class="keyword">if</span> operater == <span class="string">&#x27;×&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.fraction_multiply(num1, num2)</span><br><span class="line">        <span class="keyword">if</span> operater == <span class="string">&#x27;÷&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> self.fraction_divide(num1, num2)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 转成逆波兰</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate_postfix_expression</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 运算符栈</span></span><br><span class="line">        operator_stack = []</span><br><span class="line">        <span class="comment"># 后缀栈</span></span><br><span class="line">        postfix_stack = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> self.expression:</span><br><span class="line">            <span class="comment"># 如果是操作数则添加</span></span><br><span class="line">            <span class="keyword">if</span> element <span class="keyword">not</span> <span class="keyword">in</span> operators:</span><br><span class="line">                postfix_stack.append(element)</span><br><span class="line">            <span class="comment"># 如果是运算符则按优先级</span></span><br><span class="line">            <span class="keyword">elif</span> element <span class="keyword">in</span> operator.values():</span><br><span class="line">                <span class="comment"># 运算符栈为空，或者栈顶为(，则压栈</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> operator_stack <span class="keyword">or</span> operator_stack[-<span class="number">1</span>] == <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line">                    operator_stack.append(element)</span><br><span class="line">                <span class="comment"># 若当前运算符优先级大于运算符栈顶，则压栈</span></span><br><span class="line">                <span class="keyword">elif</span> priority[element] &gt;= priority[operator_stack[-<span class="number">1</span>]]:</span><br><span class="line">                    operator_stack.append(element)</span><br><span class="line">                <span class="comment"># 否则弹栈并压入后缀队列直到优先级大于栈顶或空栈</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">while</span> operator_stack <span class="keyword">and</span> priority[element] &lt; priority[operator_stack[-<span class="number">1</span>]]:</span><br><span class="line">                        postfix_stack.append(operator_stack.pop())</span><br><span class="line">                    operator_stack.append(element)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 如果遇到括号</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 若为左括号直接压入运算符栈</span></span><br><span class="line">                <span class="keyword">if</span> element == <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line">                    operator_stack.append(element)</span><br><span class="line">                <span class="comment"># 否则弹栈并压入后缀队列直到遇到左括号</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">while</span> operator_stack[-<span class="number">1</span>] != <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line">                        postfix_stack.append(operator_stack.pop())</span><br><span class="line">                    operator_stack.pop()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> operator_stack:</span><br><span class="line">            postfix_stack.append(operator_stack.pop())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> postfix_stack</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算表达式(运算过程出现负数，或者除数为0，返回False，否则返回Fraction类)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cal_expression</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 生成后缀表达式</span></span><br><span class="line">        expressions_result = self.generate_postfix_expression()</span><br><span class="line">        <span class="comment"># 存储阶段性结果</span></span><br><span class="line">        stage_results = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 使用list作为栈来计算</span></span><br><span class="line">        calculate_stack = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 后缀遍历</span></span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> expressions_result:</span><br><span class="line">            <span class="comment"># 若是数字则入栈, 操作符则将栈顶两个元素出栈</span></span><br><span class="line">            <span class="keyword">if</span> element <span class="keyword">not</span> <span class="keyword">in</span> operators:</span><br><span class="line">                calculate_stack.append(element)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># 操作数</span></span><br><span class="line">                num1 = calculate_stack.pop()</span><br><span class="line">                <span class="comment"># 操作数</span></span><br><span class="line">                num2 = calculate_stack.pop()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 除数不能为0</span></span><br><span class="line">                <span class="keyword">if</span> num1 == <span class="string">&quot;0&quot;</span> <span class="keyword">and</span> element == <span class="string">&#x27;÷&#x27;</span>:</span><br><span class="line">                    <span class="keyword">return</span> [<span class="literal">False</span>, []]</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 结果</span></span><br><span class="line">                result = self.operate(num2, num1, element)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> result.denominator == <span class="number">0</span> <span class="keyword">or</span> <span class="string">&#x27;-&#x27;</span> <span class="keyword">in</span> result.to_string():</span><br><span class="line">                    <span class="keyword">return</span> [<span class="literal">False</span>, []]</span><br><span class="line"></span><br><span class="line">                stage_results.append(result.to_string())</span><br><span class="line"></span><br><span class="line">                <span class="comment"># 结果入栈</span></span><br><span class="line">                calculate_stack.append(result)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 返回结果</span></span><br><span class="line">        <span class="keyword">return</span> [calculate_stack[<span class="number">0</span>], stage_results]</span><br></pre></td></tr></table></figure>
<h2 id="四、实际测试"><a href="#四、实际测试" class="headerlink" title="四、实际测试"></a>四、实际测试</h2><blockquote>
<h3 id="通过命令行控制"><a href="#通过命令行控制" class="headerlink" title="通过命令行控制"></a>通过命令行控制</h3><p>python ArithmeticCLMode.py [args|args]<br>[args]<br>├─ -h –help # 输出帮助信息<br>├─ -n # 指定生成表达式数量，默认100<br>├─ -r # 指定生成表达式各个数字的取值范围，默认100<br>├─ -a # 需和-e参数共同使用进行批改，指定答案文件<br>├─ -e # 需和-a参数共同使用进行批改，指定练习文件<br>└─ -g # 开启GUI</p>
</blockquote>
<blockquote>
<h3 id="通过gui控制"><a href="#通过gui控制" class="headerlink" title="通过gui控制"></a>通过gui控制</h3></blockquote>
<blockquote>
<p>python ArithmeticGMode.py</p>
</blockquote>
<p><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/image-20200414233202708.png" alt="image-20200414233202708"></p>
<h4 id="执行代码"><a href="#执行代码" class="headerlink" title="执行代码"></a>执行代码</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ArithmeticCLMode.py -n <span class="number">100</span> -r <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>  <img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_60c4aa60be8f2619d5715fc68bfa762d.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将上述执行生成的 Exercise.txt 中的1~10题的答案改为错误 执行</span></span><br><span class="line">python ArithmeticCLMode.py -e ./docs/Exercise.txt -a ./docs/Answer.txt</span><br></pre></td></tr></table></figure>
<p>  <img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_993b6c9a87996b978128c0eacd68a660.png" alt></p>
<hr>
<h2 id="五、效能分析"><a href="#五、效能分析" class="headerlink" title="五、效能分析"></a>五、效能分析</h2><blockquote>
<p>由Pycharm测试输出性能测试</p>
</blockquote>
<p><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_cc740cca241023e3a9f800dca4c03b00.png" alt></p>
<blockquote>
<p>程序耗时在多线程中的 生成表达式及计算, 以及I/O操作</p>
</blockquote>
<blockquote>
<p>在值域1000的情况下各生成不同数量级四则运算的耗时测试<br><img src="/2020/07/29/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%94%9F%E6%88%90%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F-Python/upload_97d3624288947d04deacbe79ec23f00d.png" alt></p>
</blockquote>
<hr>
<h2 id="六、PSP表格-🚩"><a href="#六、PSP表格-🚩" class="headerlink" title="六、PSP表格 🚩"></a>六、PSP表格 🚩</h2><table>
<thead>
<tr>
<th>PSP2.1</th>
<th>Personal Software Process Stages</th>
<th>预估耗时（分钟）</th>
<th>实际耗时（分钟）</th>
</tr>
</thead>
<tbody><tr>
<td>Planning</td>
<td>计划</td>
<td>30</td>
<td>10</td>
</tr>
<tr>
<td>· Estimate</td>
<td>· 估计这个任务需要多少时间</td>
<td>30</td>
<td>10</td>
</tr>
<tr>
<td>Development</td>
<td>开发</td>
<td>1055</td>
<td>1480</td>
</tr>
<tr>
<td>· Analysis</td>
<td>· 需求分析 (包括学习新技术)</td>
<td>120</td>
<td>335</td>
</tr>
<tr>
<td>· Design Spec</td>
<td>· 生成设计文档</td>
<td>60</td>
<td>35</td>
</tr>
<tr>
<td>· Design Review</td>
<td>· 设计复审 (和同事审核设计文档)</td>
<td>5</td>
<td>5</td>
</tr>
<tr>
<td>· Coding Standard</td>
<td>· 代码规范 (为目前的开发制定合适的规范)</td>
<td>10</td>
<td>5</td>
</tr>
<tr>
<td>· Design</td>
<td>· 具体设计</td>
<td>200</td>
<td>120</td>
</tr>
<tr>
<td>· Coding</td>
<td>· 具体编码</td>
<td>600</td>
<td>580</td>
</tr>
<tr>
<td>· Code Review</td>
<td>· 代码复审</td>
<td>30</td>
<td>120</td>
</tr>
<tr>
<td>· Test</td>
<td>· 测试（自我测试，修改代码，提交修改）</td>
<td>30</td>
<td>150</td>
</tr>
<tr>
<td>Reporting</td>
<td>报告</td>
<td>85</td>
<td>130</td>
</tr>
<tr>
<td>· Test Report</td>
<td>· 测试报告</td>
<td>60</td>
<td>30</td>
</tr>
<tr>
<td>· Size Measurement</td>
<td>· 计算工作量</td>
<td>10</td>
<td>10</td>
</tr>
<tr>
<td>· Postmortem &amp; Process Improvement Plan</td>
<td>· 事后总结, 并提出过程改进计划</td>
<td>15</td>
<td>90</td>
</tr>
<tr>
<td>合计</td>
<td></td>
<td>1170</td>
<td>1620</td>
</tr>
</tbody></table>
<hr>
<h2 id="七、总结-🚀"><a href="#七、总结-🚀" class="headerlink" title="七、总结 🚀"></a>七、总结 🚀</h2><blockquote>
<p>优点：</p>
</blockquote>
<ol>
<li>在此次项目合作中，我们通过 “Notion” 这一个软件完成设计我们的 开发流程、工作分配以及我们的代码规范的设计。我们将需求列出，根据难度不同从而安排开发流程，每个人根据自己能力特出点不同而去做不同的需求，再通过交流约定我们每个人的接口。简化开发流程。</li>
<li>交流和配合都挺顺畅的</li>
</ol>
<blockquote>
<p>不足：</p>
</blockquote>
<ol>
<li>开发中各个模块的依赖关系在开发任务中没有处理清楚，导致双方都有空窗期</li>
</ol>
<h3 id="互评-❤💛💙"><a href="#互评-❤💛💙" class="headerlink" title="互评 ❤💛💙"></a>互评 ❤💛💙</h3><blockquote>
<p>To 郑靓<br>能力强，效率高，非常积极主动。能根据自己日常使用的工具提高效率，在实际开发中有明确的开发流程思路，开发过程中有部分函数代码注释思路不清。</p>
</blockquote>
<blockquote>
<p>To 张鹏<br>配合和交流能力强，效率高，能主动揽接任务，思维挺好的，但比较被动</p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>四则运算生成命令行程序 (Python)</p><p><a href="https://liang5757.github.io/2020/07/29/大学课程/四则运算生成命令行程序-Python/">https://liang5757.github.io/2020/07/29/大学课程/四则运算生成命令行程序-Python/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Liang</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-07-29</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-12-25</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/">软件工程 </a></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/07/31/Java/Java%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Java的字符串操作</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/07/28/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/WordCount-Python/"><span class="level-item">WordCount (Python)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="SOHUCS" sid="2020/07/29/大学课程/四则运算生成命令行程序-Python/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyvPeQjDi',conf: 'prod_4423b2f156eaea470ca4247bc48505a9'});</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#Github项目地址：Github-Pages"><span class="level-left"><span class="level-item">Github项目地址：Github Pages</span></span></a></li></ul><li><a class="level is-mobile" href="#一、项目需求分析"><span class="level-left"><span class="level-item">一、项目需求分析</span></span></a></li><li><a class="level is-mobile" href="#二、功能实现"><span class="level-left"><span class="level-item">二、功能实现</span></span></a></li><li><a class="level is-mobile" href="#三、代码实现or功能说明"><span class="level-left"><span class="level-item">三、代码实现or功能说明</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#★-GUI功能扩展说明-🎈"><span class="level-left"><span class="level-item">★ GUI功能扩展说明 🎈</span></span></a></li><li><a class="level is-mobile" href="#通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成-详参下文-‘判断重复的思路’"><span class="level-left"><span class="level-item">通过后缀表达式的计算过程，确保生成表达式满足题目所有要求，避免重复的表达式生成 (详参下文 ‘判断重复的思路’ )</span></span></a></li><li><a class="level is-mobile" href="#★-多线程（防止I-O阻塞）🎈"><span class="level-left"><span class="level-item">★ 多线程（防止I/O阻塞）🎈</span></span></a></li><li><a class="level is-mobile" href="#★-判断重复的思路-🎈"><span class="level-left"><span class="level-item">★ 判断重复的思路 🎈</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#——创建数据结构"><span class="level-left"><span class="level-item">——创建数据结构</span></span></a></li></ul></li><li><a class="level is-mobile" href="#★-生成表达式思路-🎈"><span class="level-left"><span class="level-item">★ 生成表达式思路 🎈</span></span></a></li><li><a class="level is-mobile" href="#★-计算思路（后缀表达式）-🎈"><span class="level-left"><span class="level-item">★ 计算思路（后缀表达式） 🎈</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#生成后缀表达式"><span class="level-left"><span class="level-item">生成后缀表达式</span></span></a></li><li><a class="level is-mobile" href="#计算后缀表达式"><span class="level-left"><span class="level-item">计算后缀表达式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#代码-🎈"><span class="level-left"><span class="level-item">代码 🎈</span></span></a></li></ul></li><li><a class="level is-mobile" href="#四、实际测试"><span class="level-left"><span class="level-item">四、实际测试</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#通过命令行控制"><span class="level-left"><span class="level-item">通过命令行控制</span></span></a></li><li><a class="level is-mobile" href="#通过gui控制"><span class="level-left"><span class="level-item">通过gui控制</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#执行代码"><span class="level-left"><span class="level-item">执行代码</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#五、效能分析"><span class="level-left"><span class="level-item">五、效能分析</span></span></a></li><li><a class="level is-mobile" href="#六、PSP表格-🚩"><span class="level-left"><span class="level-item">六、PSP表格 🚩</span></span></a></li><li><a class="level is-mobile" href="#七、总结-🚀"><span class="level-left"><span class="level-item">七、总结 🚀</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#互评-❤💛💙"><span class="level-left"><span class="level-item">互评 ❤💛💙</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Liang的个人博客</a><p class="is-size-7"><span>&copy; 2023 Liang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Liang5757"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>